@page
@model FarmApplication.Pages.CalendarModel

@using System.Security.Claims

<div class="text-center">
	<h1 class="accordion-body">Calendar page</h1>
	<p> This page should show a timetable like thing with a clock that shows when activities in different fields are happening</p>
	<p> Sort of like the timetable on blackboard, should also display the resources being used </p>
</div>

@{
	var currentUserId = User.FindFirstValue(ClaimTypes.NameIdentifier); // Retrieve current user's ID
}

<div class="container p-3">
	<div class="row pt-4">		
		<div class="col-6 text-end">
			<a asp-page="CreateTask" class="btn btn-primary">
				Create new Task
			</a>
		</div>
	</div>

	<br /><br />

	<table class="table table-bordered table-striped" style="width:100%">
		<thead>
			<tr>
				<th>
					Field
				</th>
				<th>
					resource
				</th>
				<th>
					equipment
				</th>
				<th>
					workers available
				</th>
			</tr>
		</thead>
		<tbody>
			@foreach (var obj in Model.FarmTask.Where(f => f.UserID == currentUserId))
			{
				<tr>
					<td width="20%">@obj.FieldValues.FieldName</td>
					<td width="20%">@obj.ResourcesValues.ResourceName.ToString()</td>
					<td width="20%">@obj.EquipmentValues.EquipmentName.ToString()</td>
					<td width="20%">@obj.WorkersValues.WorkerName.ToString()</td>
					<td>
						<div class="w-75 btn-group" role="group">
							<a asp-page="EditResource" asp-route-id="@obj.TaskID" class="btn btn-primary mx-2">
								Edit
							</a>
							<a asp-page="DeleteField" asp-route-id="@obj.TaskID" class="btn btn-danger mx-2">Delete</a>
						</div>
					</td>
				</tr>
			}
		</tbody>
	</table>

</div>

